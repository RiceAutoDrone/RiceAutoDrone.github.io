<!doctype html>
<html lang="en">
	<head>
    <meta charset="utf-8">
    <title>MavProxy Settings</title>
    <link rel="stylesheet" href="/assets/css/custom.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,700" media="all">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
	<body>
		<header>
    <div class="container">
        <nav class="main-nav">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/blog/">Blog</a></li>
                <!-- <li><a href="/settings/01-access-point.html">Software</a></li> -->
                <li><a href="/settings/">Settings</a></li>
                <li><a href="/about/">About</a></li>
            </ul>
        </nav>
        <h3><a href="/">Rice<strong>Autodrone</strong></a></h3>
    </div>
</header>
		<div class="content">
			<article class="post">

  <header class="post-header">
    <h1 class="post-title">MavProxy Settings</h1>
  </header>

  <div class="post-content">
    <h2 id="reference">Reference</h2>
<p><a href="https://www.youtube.com/watch?v=nIuoCYauW3s">https://www.youtube.com/watch?v=nIuoCYauW3s</a></p>

<h2 id="setup-the-rpi-software-mavproxy">Setup the RPi Software (MAVProxy)</h2>
<p>MAVProxy can be used to send commands to the flight controller from the Pi. It can also be used to route telemetry to other network endpoints.</p>

<p>This assumes you have a SSH connection to the Pi. If not, see see the the RPi Documentation.
See the MAVProxy Documentation for install instructions</p>

<h3 id="install">Install</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo nano /boot/config.txt
</code></pre></div></div>

<p>add</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enable_uart=1
dtoverlay=disable-bt
</code></pre></div></div>

<p>For Python 3 on Debian based systems (including Ubuntu, WSL, Raspian):</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update 
sudo apt-get install python3-dev python3-opencv python3-wxgtk4.0 python3-pip python3-matplotlib python3-lxml libxml2-dev libxslt-dev
pip3 install PyYAML mavproxy --user
echo 'export PATH="$PATH:$HOME/.local/bin"' &gt;&gt; ~/.bashrc
sudo reboot
</code></pre></div></div>

<p>To test the RPi and flight controller are able to communicate with each other first ensure the RPi and flight controller are powered, then in a console on the RPi type:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mavproxy.py --master=/dev/ttyAMA0 --aircraft MyCopter //--console
</code></pre></div></div>

<p>Once MAVProxy has started you should be able to type in the following command to display the ARMING_CHECK parameters value</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>param show ARMING_CHECK
param set ARMING_CHECK 0
arm throttle
</code></pre></div></div>

<p>Note</p>

<p>If you get an error about not being able to find log files or if this example otherwise doesn’t run properly, make sure that you haven’t accidentally assigned these files to another username, such as Root.</p>

<p>To run MAVProxy as a telemetry router on the Pi, set it up to run as a service and use the –daemon and –non-interactive parameters. For example:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mavproxy.py --daemon --non-interactive --default-modules='' --continue --master=/dev/ttyAMA0 --out=udp:pro:14550
Note
</code></pre></div></div>

<p>If the Raspberry PI is heavily loaded, mavproxy.py might not provide a reliable connecton for telemetry routing. This is more likely on older/slower devices like the Raspberry PI Zero. If this happens, consider using mavlink-routerd. See this post on the ArduPilot forum for a detailed discussion: MavLink Routing with Router software.</p>

<h2 id="checkpoint">Checkpoint</h2>
<ul>
  <li><a href="">Image</a></li>
</ul>

  </div>

</article>

		</div>
	</body>
	<footer>
    <div class="container">
        <p class="center-text"> <a href="https://www.linkedin.com/in/eric2678/">Created by Yu Che Lin</a></p>
    </div>
</footer>
</html>
